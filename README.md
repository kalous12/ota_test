# Changelog

## [V0.6.4 Base] - 2025-09-27

### Added

- 添加2FA认证支持，包括TOTP验证和备用验证码功能
- 添加用户密码修改功能，可通过WebSocket接口更新密码
- 添加日志文件截止时间戳解析与显示功能
- 添加OTA文件上传时覆盖已存在文件的支持
- 添加账户登出确认弹窗交互

### Changed

- 重构OLED显示控制模块，合并结构体并增强功能
- 优化用户认证流程，支持用户名、密码和2FA一次性密码联合校验
- 调整用户配置文件结构，将密码移入ACCOUNT分组下
- 增强2FA验证逻辑与配置写入同步机制
- 完善前端国际化文案，增强账户管理和调试功能描述
- 更新依赖包版本，包括antd、axios、jotai等

### Fixed

- 修复ATX模块消息节点内存管理问题并优化指针使用
- 修复JSON解析时的健壮性问题，增强错误提示信息
- 修复用户密码修改时URL解码和解密流程
- 修复接收线程中的条件判断逻辑
- 修复按键事件处理逻辑，添加调试日志

### Removed

- 移除MOCK_DEACTIVATE消息处理逻辑

## [V0.6.3 Base] - 2025-09-24

### Added

- 添加本地ota的新功能
- 添加OLED设置页面数据同步功能
- 添加系统控制和恢复出厂设置功能

### Changed

- 优化OTA更新后的重启逻辑
- 重构恢复出厂设置功能并优化前端交互
- 重构设备设置页面，移除冗余组件
- 调整虚拟键盘样式并实现 Caps Lock 状态高亮

### Fixed

- 修复连接状态变量缩进问题
- 修复虚拟键盘修饰键状态更新逻辑
- 修复读取输入事件时的错误处理

### Removed

- 移除虚拟机重启功能组件

## [V0.6.2 Base] - 2025-09-23

### Added

- 添加英文文本粘贴并转换为键盘事件发送功能
- 添加鼠标和键盘的启用/禁用功能
- 添加鼠标滚动速率控制(1-5级)
- 添加虚拟键盘浮动功能
- 增加按键防抖和LED控制功能

### Changed

- 重构鼠标设备控制逻辑
- 调整虚拟键盘样式并实现 Caps Lock 状态高亮
- 优化虚拟键盘功能与自动调整
- 重命名加密解密函数

### Fixed

- 修复虚拟键盘修饰键状态更新逻辑
- 修复USB键盘驱动中keyboard_lock参数的空指针检查
- 修复鼠标报告发送失败问题
- 修复读取输入事件时的错误处理

### Removed

- 移除独立的 VirtualKeyboard 组件
